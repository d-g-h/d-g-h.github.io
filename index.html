<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/solarized_dark.min.css">
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" href="/favicon.ico">
    <title>dgh-thoughts</title>
    <script>
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-31166273-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body>
    <div class="main-container"></div>
    <header>
      <div class="logo"></div>
      <h1><a href="/">Thoughts-about-Thoughts</a></h1>
      <nav>
        <ul>
          <li><a href="https://github.com/d-g-h" class="icon-mark-github">GitHub</a></li>
          <li><a href="/resume" class="icon-file-text">Resume</a></li>
          <li><a href="https://github.com/d-g-h/dotfiles" class="contribute">.dotfiles</a></li>
          <li><a href="https://github.com/d-g-h/d-g-h.github.com" class="contribute">(View Source/Contribute/Search)</a></li>
        </ul>
      </nav>
    </header>
    <div class="container"><h2 id="-gulp-generated-static-site-posts-gulp-static-site-generator-"><a href="/posts/Gulp-Static-Site-Generator">Gulp Generated Static Site</a></h2>
<p><img src="https://www.dropbox.com/s/l1z33fqfyetcd0p/gulpBrowserSync.gif?raw=1" alt="Gulp running in terminal"></p>
<p><em>Updated: June 22, 2015 for es6+</em></p>
<h3 id="why-">Why?</h3>
<pre><code class="lang-sh">gulp
</code></pre>
<p>A site should be simple. I should be able to use a daily used language to highlight some thoughts about sharing information digitally. A site of this natural should also be not based on my sole opinion, but rather, it should be corrected, or duplicated, or replicated by anyone. Source control, and centralized repository, namely GitHub at this time should help with that. Markdown should help with writing, separating presentation and the content.</p>
<p>To run the file below, you will need to either node or iojs(2.10), which is what I have started to
run. The idea here to run checks on files on file changes, and to see changes immediately, and to
regenerate all the content. For my purposes this is perfect for the 4-6 posts I plan on writing for
the year.</p>
<h3 id="how-">How?</h3>
<h4 id="es6-">es6+</h4>
<pre><code class="lang-js">import path from &#39;path&#39;;
import gulp from &#39;gulp&#39;;
import browserSync from &#39;browser-sync&#39;;
import gulpLoadPlugins from &#39;gulp-load-plugins&#39;;

const $ = gulpLoadPlugins();
const reload = browserSync.reload;

gulp.task(&#39;scripts&#39;, () =&gt; {
  return gulp.src(&#39;assets/js/src/**/*.js&#39;)
    .pipe($.sourcemaps.init())
    .pipe($.concat(&#39;main.js&#39;))
    .pipe($.sourcemaps.write(&#39;.&#39;))
    .pipe(gulp.dest(&#39;assets/js/dist&#39;));
});

gulp.task(&#39;styles&#39;, () =&gt; {
  gulp.src(&#39;assets/sass/style.sass&#39;)
    .pipe($.sourcemaps.init())
    .pipe($.sass({
      indentedSyntax: true,
      outputStyle: &#39;compressed&#39;,
      errLogToConsole: true
    }))
    .pipe($.autoprefixer())
    .pipe($.sourcemaps.write())
    .pipe(gulp.dest(&#39;.&#39;))
    .pipe(reload({stream: true}));
});

gulp.task(&#39;csslint&#39;, () =&gt; {
  gulp.src(&#39;style.css&#39;)
    .pipe($.csslint(&#39;.csslintrc&#39;))
    .pipe($.csslint.reporter());
});

gulp.task(&#39;eslint&#39;, () =&gt; {
  gulp.src([&#39;gulpfile.js&#39;])
    .pipe($.eslint())
    .pipe($.eslint.format());
});

gulp.task(&#39;indexJade&#39;, () =&gt; {
  gulp.src(&#39;.templates/index.jade&#39;)
    .pipe($.jade({
      pretty: true
    }))
    .pipe(gulp.dest(&#39;.&#39;))
    .pipe(reload({stream: true}));
});

/*
 *Here let&#39;s create, and maintain the content in .content
 *Once, we are ready to go, we can feature it in the .template/index.jade,
 *and/or we can add a new directory (named after the title), and copy of
 *over the layout with specific .content that matches. The task below will
 *generate the .html in the same directory four times a year.
 */

gulp.task(&#39;postsJade&#39;, () =&gt; {
  gulp.src(&#39;posts/**/*.jade&#39;)
    .pipe($.tap( file =&gt; {
      let filename = path.basename(file.path);
      let dirname  = path.basename(path.dirname(file.path));
      return gulp.src(file.path)
      .pipe($.jade({
        pretty: true,
        name: filename
      }))
      .pipe(gulp.dest(&#39;posts/&#39; + dirname));
    }))
    .pipe(reload({stream: true}));
});

gulp.task(&#39;resumeJade&#39;, () =&gt; {
  gulp.src(&#39;resume/*.jade&#39;)
    .pipe($.jade({
      pretty: true
    }))
    .pipe(gulp.dest(&#39;resume&#39;))
    .pipe(reload({stream: true}));
});

gulp.task(&#39;browser-sync&#39;, () =&gt; {
  browserSync.init({
    server: true,
    notify: false,
    ghostMode: {
      clicks: true,
      forms: true,
      scroll: true
    },
    logConnections: true,
    open: true,
    port: 8001
  });
});

gulp.task(&#39;watch&#39;, () =&gt; {
  gulp.watch([&#39;gulpfile.js&#39;], [&#39;eslint&#39;]);
  gulp.watch(&#39;.content/**/*.md&#39;, [&#39;indexJade&#39;, &#39;postsJade&#39;]);
  gulp.watch(&#39;**/*.jade&#39;, [&#39;indexJade&#39;, &#39;postsJade&#39;]);
  gulp.watch(&#39;.templates/**/*.jade&#39;, [&#39;indexJade&#39;, &#39;postsJade&#39;]);
  gulp.watch(&#39;assets/sass/**/*&#39;, [&#39;styles&#39;]);
  gulp.watch(&#39;style.css&#39;, [&#39;csslint&#39;]);
});

// Default Task
gulp.task(&#39;default&#39;, [
  &#39;styles&#39;,
  &#39;csslint&#39;,
  &#39;eslint&#39;,
  &#39;indexJade&#39;,
  &#39;postsJade&#39;,
  &#39;browser-sync&#39;,
  &#39;watch&#39;
]);
</code></pre>
<h4 id="es5">es5</h4>
<pre><code class="lang-js">var gulp         = require(&#39;gulp&#39;);
var sass         = require(&#39;gulp-sass&#39;);
var sourcemaps   = require(&#39;gulp-sourcemaps&#39;);
var autoprefixer = require(&#39;gulp-autoprefixer&#39;);
var csslint      = require(&#39;gulp-csslint&#39;);
var jshint       = require(&#39;gulp-jshint&#39;);
var jscs         = require(&#39;gulp-jscs&#39;);
var stylish      = require(&#39;jshint-stylish&#39;);
var jade         = require(&#39;gulp-jade&#39;);
var path         = require(&#39;path&#39;);
var tap          = require(&#39;gulp-tap&#39;);
var browserSync  = require(&#39;browser-sync&#39;).create();
var reload       = browserSync.reload;

gulp.task(&#39;sass&#39;, function() {
  gulp.src(&#39;assets/sass/style.sass&#39;)
    .pipe(sourcemaps.init())
    .pipe(sass({
      indentedSyntax: true,
      outputStyle: &#39;compressed&#39;,
      errLogToConsole: true
    }))
    .pipe(autoprefixer())
    .pipe(sourcemaps.write())
    .pipe(gulp.dest(&#39;.&#39;))
    .pipe(reload({stream: true}));
});

gulp.task(&#39;csslint&#39;, function() {
  gulp.src(&#39;style.css&#39;)
    .pipe(csslint(&#39;.csslintrc&#39;))
    .pipe(csslint.reporter());
});

gulp.task(&#39;jshint&#39;, function() {
  gulp.src([&#39;gulpfile.js&#39;])
    .pipe(jshint(&#39;.jshintrc&#39;))
    .pipe(jshint.reporter(stylish));
});

gulp.task(&#39;jscs&#39;, function() {
  return gulp.src([&#39;gulpfile.js&#39;])
    .pipe(jscs());
});

gulp.task(&#39;indexJade&#39;, function() {
  gulp.src(&#39;.templates/index.jade&#39;)
    .pipe(jade({
      pretty: true
    }))
    .pipe(gulp.dest(&#39;.&#39;))
    .pipe(reload({stream: true}));

});

/*
 *Here let&#39;s create, and maintain the content in .content
 *Once, we are ready to go, we can feature it in the .template/index.jade,
 *and/or we can add a new directory (named after the title), and copy of 
 *over the layout with specific .content that matches. The task below will
 *generate the .html in the same directory four times a year.
 */

gulp.task(&#39;postsJade&#39;, function() {
  gulp.src(&#39;posts/**/*.jade&#39;)
    .pipe(tap(function(file, t) {
      var filename = path.basename(file.path);
      var dirname  = path.basename(path.dirname(file.path));
      return gulp.src(file.path)
      .pipe(jade({
        pretty: true,
        name: filename
      }))
      .pipe(gulp.dest(&#39;posts/&#39; + dirname));
    }))
    .pipe(reload({stream: true}));

});

gulp.task(&#39;resumeJade&#39;, function() {
  gulp.src(&#39;resume/*.jade&#39;)
    .pipe(jade({
      pretty: true
    }))
    .pipe(gulp.dest(&#39;resume&#39;))
    .pipe(reload({stream: true}));
});

gulp.task(&#39;browser-sync&#39;, function() {
  browserSync.init({
    server: true,
    notify: false,
    ghostMode: {
      clicks: true,
      forms: true,
      scroll: true
    },
    logConnections: true,
    open: true,
    port: 8001
  });
});

gulp.task(&#39;watch&#39;, function() {
  gulp.watch([&#39;gulpfile.js&#39;], [&#39;jscs&#39;, &#39;jshint&#39;]);
  gulp.watch(&#39;.content/**/*.md&#39;, [&#39;indexJade&#39;, &#39;postsJade&#39;]);
  gulp.watch(&#39;**/*.jade&#39;, [&#39;indexJade&#39;, &#39;postsJade&#39;]);
  gulp.watch(&#39;.templates/**/*.jade&#39;, [&#39;indexJade&#39;, &#39;postsJade&#39;]);
  gulp.watch(&#39;assets/sass/**/*&#39;, [&#39;sass&#39;]);
  gulp.watch(&#39;style.css&#39;, [&#39;csslint&#39;]);
});

// Default Task
gulp.task(&#39;default&#39;, [
  &#39;sass&#39;,
  &#39;csslint&#39;,
  &#39;jshint&#39;,
  &#39;jscs&#39;,
  &#39;indexJade&#39;,
  &#39;postsJade&#39;,
  &#39;browser-sync&#39;,
  &#39;watch&#39;
]);
</code></pre>
<p>Modified <time datetime=2015-05-17>May 17, 2015</time></p>

    </div>
  </body>
</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>